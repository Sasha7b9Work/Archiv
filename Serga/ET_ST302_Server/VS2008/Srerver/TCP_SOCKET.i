#line 1 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\tcp_socket.cpp"
#line 1 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\tcp_socket.h"
#pragma once
#line 1 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\common.h"
#pragma once

typedef unsigned char uchar;
typedef unsigned int  uint;
#line 3 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\tcp_socket.h"

struct tcp_pcb;

namespace ETHERNET {
namespace TCP_SOCKET {

    static const int DEFAULT_PORT = 999;

    bool Init(void (*_funcConnect)(int _id), void (*_funcReciever)(uchar *_buffer, uint _length));
    bool SendToAll(uchar *_buffer, uint _length);
    bool Sent(int _id, uchar *_buffer, uint _length);
}
}
#line 2 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\tcp_socket.cpp"
#line 1 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\vs2008specific.h"
#pragma once








#line 11 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\vs2008specific.h"
#line 3 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\tcp_socket.cpp"

#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"












































#line 1 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\lwipopts.h"









































































































































  
  
  
  
  
  
  
  
  
  
  
  













#line 164 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\lwipopts.h"






























#line 195 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\lwipopts.h"


#line 46 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\debug.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"




































#line 38 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"



#line 42 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"

#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cc.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cpu.h"




































#line 38 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cpu.h"
#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cc.h"

typedef unsigned   char    u8_t;
typedef signed     char    s8_t;
typedef unsigned   short   u16_t;
typedef signed     short   s16_t;
typedef unsigned   long    u32_t;
typedef signed     long    s32_t;
typedef u32_t mem_ptr_t;
typedef int sys_prot_t;























#line 69 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cc.h"






#line 76 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cc.h"






#line 83 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cc.h"






#line 90 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cc.h"





#line 96 "d:\\sasha\\libs\\lwip-1.4.1\\src\\port\\stm32f2x7\\arch\\cc.h"
#line 44 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"









#line 54 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"


extern "C" {
#line 58 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"



#line 62 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"



#line 66 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"



#line 70 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"




#line 75 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"





































































































































extern int errno;
#line 210 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"

#line 212 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"


}
#line 216 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"

#line 218 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"
#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\debug.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 37 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\debug.h"

































#line 71 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\debug.h"





#line 77 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\debug.h"



















#line 97 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\debug.h"

#line 99 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\debug.h"

#line 47 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






























#line 78 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 86 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 94 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"













#line 108 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 117 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"

























#line 143 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"












#line 156 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 164 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"









#line 174 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 182 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"









#line 192 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"





















#line 214 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"





















#line 236 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








































#line 277 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"










#line 288 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"









#line 298 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"









#line 308 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"

















#line 326 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 334 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 343 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 352 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 359 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 367 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 376 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 385 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 393 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 401 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 409 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"


















#line 428 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 435 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"










#line 446 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"













#line 460 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 472 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 479 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 488 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 495 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"














#line 510 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 519 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 528 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 537 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 546 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"









#line 556 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"










#line 567 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 575 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 582 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 591 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 599 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"










#line 610 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 619 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"



















#line 639 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 646 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 653 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 665 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 672 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"


















#line 691 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 703 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 711 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"










#line 722 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"












#line 735 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 744 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 752 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 761 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 770 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 778 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 787 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 795 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 807 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"












#line 820 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"




#line 825 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"




#line 830 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"




#line 835 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"




#line 840 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"




#line 845 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"













#line 859 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"





#line 865 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"


















#line 884 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"













#line 898 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"

































#line 932 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 939 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






























#line 970 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"

























#line 996 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1005 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1013 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1021 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1028 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1037 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"

















#line 1055 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1062 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1070 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 1082 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"














#line 1097 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"





















#line 1119 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1126 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1134 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1142 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1150 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"










#line 1161 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1169 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1177 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"
















#line 1194 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"












#line 1207 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 1219 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 1231 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 1243 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1252 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1261 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1270 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1277 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1286 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1295 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1302 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1311 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1320 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1327 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1336 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1345 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1354 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1363 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1372 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1381 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"












#line 1394 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1402 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"













#line 1416 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"



















#line 1436 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1445 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1454 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1462 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1470 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1477 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1484 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1491 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"








#line 1500 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






































































































#line 1603 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"













#line 1617 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"











#line 1629 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1636 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1643 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"









































































































































#line 1781 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"












 






 












#line 1814 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"
 






 




















#line 1843 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"









































#line 1885 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 1893 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1900 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1907 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1914 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1921 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1928 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1935 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1942 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1949 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1956 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1963 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1970 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1977 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1984 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1991 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 1998 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2005 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2012 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2019 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2026 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"







#line 2034 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2041 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2048 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2055 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2062 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2069 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2076 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2083 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2090 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2097 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2104 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2111 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2118 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2125 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






#line 2132 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"

#line 2134 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"

#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"



#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"


extern "C" {
#line 40 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"



























#line 68 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"







#line 76 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"
typedef u16_t mem_size_t;

#line 79 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"







#line 87 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"

void  mem_init(void);
void *mem_trim(void *mem, mem_size_t size);
#line 91 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"
void *mem_malloc(mem_size_t size);
void *mem_calloc(mem_size_t count, mem_size_t size);
void  mem_free(void *mem);
#line 95 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"







#line 103 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"







#line 111 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"






#line 118 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"


}
#line 122 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"

#line 124 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\mem.h"
#line 40 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"



































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 37 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"

























































































































































































































#line 37 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"


extern "C" {
#line 41 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"






typedef s8_t err_t;
#line 49 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"






























#line 80 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"


}
#line 84 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"

#line 86 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"
#line 38 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"


extern "C" {
#line 42 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"








typedef enum {
  PBUF_TRANSPORT,
  PBUF_IP,
  PBUF_LINK,
  PBUF_RAW
} pbuf_layer;

typedef enum {
  PBUF_RAM, 
  PBUF_ROM, 
  PBUF_REF, 
  PBUF_POOL 
} pbuf_type;
















struct pbuf {
  
  struct pbuf *next;

  
  void *payload;

  






  u16_t tot_len;

  
  u16_t len;

  
  u8_t  type;

  
  u8_t flags;

  




  u16_t ref;
};



typedef void (*pbuf_free_custom_fn)(struct pbuf *p);


struct pbuf_custom {
  
  struct pbuf pbuf;
  
  pbuf_free_custom_fn custom_free_function;
};
#line 124 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"

















#line 142 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"




struct pbuf *pbuf_alloc(pbuf_layer l, u16_t length, pbuf_type type);

struct pbuf *pbuf_alloced_custom(pbuf_layer l, u16_t length, pbuf_type type,
                                 struct pbuf_custom *p, void *payload_mem,
                                 u16_t payload_mem_len);
#line 152 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"
void pbuf_realloc(struct pbuf *p, u16_t size); 
u8_t pbuf_header(struct pbuf *p, s16_t header_size);
void pbuf_ref(struct pbuf *p);
u8_t pbuf_free(struct pbuf *p);
u8_t pbuf_clen(struct pbuf *p);  
void pbuf_cat(struct pbuf *head, struct pbuf *tail);
void pbuf_chain(struct pbuf *head, struct pbuf *tail);
struct pbuf *pbuf_dechain(struct pbuf *p);
err_t pbuf_copy(struct pbuf *p_to, struct pbuf *p_from);
u16_t pbuf_copy_partial(struct pbuf *p, void *dataptr, u16_t len, u16_t offset);
err_t pbuf_take(struct pbuf *buf, const void *dataptr, u16_t len);
struct pbuf *pbuf_coalesce(struct pbuf *p, pbuf_layer layer);



#line 168 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"

u8_t pbuf_get_at(struct pbuf* p, u16_t offset);
u16_t pbuf_memcmp(struct pbuf* p, u16_t offset, const void* s2, u16_t n);
u16_t pbuf_memfind(struct pbuf* p, const void* mem, u16_t mem_len, u16_t start_offset);
u16_t pbuf_strstr(struct pbuf* p, const char* substr);


}
#line 177 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"

#line 179 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"
#line 41 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"

#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"



































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\arch.h"

























































































































































































































#line 37 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 38 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"


extern "C" {
#line 42 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"






#line 49 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"






#line 56 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"



#line 60 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"





















#line 82 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"










#line 93 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"





#line 99 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"
u16_t lwip_htons(u16_t x);
u16_t lwip_ntohs(u16_t x);
u32_t lwip_htonl(u32_t x);
u32_t lwip_ntohl(u32_t x);
#line 104 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"












#line 117 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"


}
#line 121 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"

#line 123 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"

#line 38 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"


















































































































































































#line 39 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"



























































































































#line 37 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"


extern "C" {
#line 41 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"



struct ip_addr {
  u32_t addr;
};







struct ip_addr_packed {
  u32_t addr;
} ;







typedef struct ip_addr ip_addr_t;
typedef struct ip_addr_packed ip_addr_p_t;









struct ip_addr2 {
  u16_t addrw[2];
} ;






struct netif;

extern const ip_addr_t ip_addr_any;
extern const ip_addr_t ip_addr_broadcast;
























































#line 145 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"







#line 153 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"






#line 160 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"











































u8_t ip4_addr_isbroadcast(u32_t addr, const struct netif *netif);


u8_t ip4_addr_netmask_valid(u32_t netmask);



























u32_t ipaddr_addr(const char *cp);
int ipaddr_aton(const char *cp, ip_addr_t *addr);

char *ipaddr_ntoa(const ip_addr_t *addr);
char *ipaddr_ntoa_r(const ip_addr_t *addr, char *buf, int buflen);


}
#line 243 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"

#line 245 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"
#line 40 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"





















































































#line 41 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"



#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"





















































































#line 40 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"

#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"




















































































































































































































































#line 42 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"

#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\def.h"



























































































































#line 44 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"


















































































































































































#line 45 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"

struct dhcp;
#line 48 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"


#line 51 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"


extern "C" {
#line 55 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"















































typedef err_t (*netif_init_fn)(struct netif *netif);






typedef err_t (*netif_input_fn)(struct pbuf *p, struct netif *inp);








typedef err_t (*netif_output_fn)(struct netif *netif, struct pbuf *p,
       ip_addr_t *ipaddr);






typedef err_t (*netif_linkoutput_fn)(struct netif *netif, struct pbuf *p);

typedef void (*netif_status_callback_fn)(struct netif *netif);

typedef err_t (*netif_igmp_mac_filter_fn)(struct netif *netif,
       ip_addr_t *group, u8_t action);




struct netif {
  
  struct netif *next;

  
  ip_addr_t ip_addr;
  ip_addr_t netmask;
  ip_addr_t gw;

  

  netif_input_fn input;
  


  netif_output_fn output;
  


  netif_linkoutput_fn linkoutput;




#line 161 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"




#line 166 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"



#line 170 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"
  

  void *state;

  
  struct dhcp *dhcp;
#line 177 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"



#line 181 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"



#line 185 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"
  
  u16_t mtu;
  
  u8_t hwaddr_len;
  
  u8_t hwaddr[6U];
  
  u8_t flags;
  
  char name[2];
  
  u8_t num;
















#line 214 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"




#line 219 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"


#line 222 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"







#line 230 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"
};
















#line 248 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"

#line 250 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"



extern struct netif *netif_list;

extern struct netif *netif_default;

void netif_init(void);

struct netif *netif_add(struct netif *netif, ip_addr_t *ipaddr, ip_addr_t *netmask,
      ip_addr_t *gw, void *state, netif_init_fn init, netif_input_fn input);

void
netif_set_addr(struct netif *netif, ip_addr_t *ipaddr, ip_addr_t *netmask,
      ip_addr_t *gw);
void netif_remove(struct netif * netif);





struct netif *netif_find(char *name);

void netif_set_default(struct netif *netif);

void netif_set_ipaddr(struct netif *netif, ip_addr_t *ipaddr);
void netif_set_netmask(struct netif *netif, ip_addr_t *netmask);
void netif_set_gw(struct netif *netif, ip_addr_t *gw);

void netif_set_up(struct netif *netif);
void netif_set_down(struct netif *netif);





#line 287 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"


#line 290 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"

void netif_set_link_up(struct netif *netif);
void netif_set_link_down(struct netif *netif);
 




#line 299 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"




#line 304 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"




#line 309 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"







#line 317 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"



#line 321 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"

#line 323 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"


}
#line 327 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"

#line 329 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"
#line 42 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"


extern "C" {
#line 46 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"






















#line 69 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"

#line 71 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"


















struct ip_pcb {

  ip_addr_t local_ip; ip_addr_t remote_ip; u8_t so_options; u8_t tos; u8_t ttl ;
};























struct ip_hdr {
  
  u8_t _v_hl;
  
  u8_t _tos;
  
  u16_t _len;
  
  u16_t _id;
  
  u16_t _offset;




  
  u8_t _ttl;
  
  u8_t _proto;
  
  u16_t _chksum;
  
  ip_addr_p_t src;
  ip_addr_p_t dest; 
} ;

























extern struct netif *current_netif;

extern const struct ip_hdr *current_header;

extern ip_addr_t current_iphdr_src;

extern ip_addr_t current_iphdr_dest;


struct netif *ip_route(ip_addr_t *dest);
err_t ip_input(struct pbuf *p, struct netif *inp);
err_t ip_output(struct pbuf *p, ip_addr_t *src, ip_addr_t *dest,
       u8_t ttl, u8_t tos, u8_t proto);
err_t ip_output_if(struct pbuf *p, ip_addr_t *src, ip_addr_t *dest,
       u8_t ttl, u8_t tos, u8_t proto,
       struct netif *netif);



#line 186 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"




#line 191 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"






















#line 214 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"

#line 216 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"


}
#line 220 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"

#line 222 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip.h"


#line 42 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"


































#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\opt.h"






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#line 36 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\pbuf.h"


















































































































































































#line 37 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\ip_addr.h"




















































































































































































































































#line 38 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\netif.h"








































































































































































































































































































































#line 39 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"


extern "C" {
#line 43 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"













enum icmp_dur_type {
  ICMP_DUR_NET   = 0,  
  ICMP_DUR_HOST  = 1,  
  ICMP_DUR_PROTO = 2,  
  ICMP_DUR_PORT  = 3,  
  ICMP_DUR_FRAG  = 4,  
  ICMP_DUR_SR    = 5   
};

enum icmp_te_type {
  ICMP_TE_TTL  = 0,    
  ICMP_TE_FRAG = 1     
};










struct icmp_echo_hdr {
  u8_t type;
  u8_t code;
  u16_t chksum;
  u16_t id;
  u16_t seqno;
} ;















void icmp_input(struct pbuf *p, struct netif *inp);
void icmp_dest_unreach(struct pbuf *p, enum icmp_dur_type t);
void icmp_time_exceeded(struct pbuf *p, enum icmp_te_type t);

#line 106 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"


}
#line 110 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"

#line 112 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\ipv4\\lwip\\icmp.h"
#line 43 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"
#line 1 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\err.h"





















































































#line 44 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"


extern "C" {
#line 48 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"

struct tcp_pcb;










typedef err_t (*tcp_accept_fn)(void *arg, struct tcp_pcb *newpcb, err_t err);











typedef err_t (*tcp_recv_fn)(void *arg, struct tcp_pcb *tpcb,
                             struct pbuf *p, err_t err);












typedef err_t (*tcp_sent_fn)(void *arg, struct tcp_pcb *tpcb,
                              u16_t len);










typedef err_t (*tcp_poll_fn)(void *arg, struct tcp_pcb *tpcb);











typedef void  (*tcp_err_fn)(void *arg, err_t err);













typedef err_t (*tcp_connected_fn)(void *arg, struct tcp_pcb *tpcb, err_t err);

enum tcp_state {
  CLOSED      = 0,
  LISTEN      = 1,
  SYN_SENT    = 2,
  SYN_RCVD    = 3,
  ESTABLISHED = 4,
  FIN_WAIT_1  = 5,
  FIN_WAIT_2  = 6,
  CLOSE_WAIT  = 7,
  CLOSING     = 8,
  LAST_ACK    = 9,
  TIME_WAIT   = 10
};


  









#line 152 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"
















struct tcp_pcb {

  ip_addr_t local_ip; ip_addr_t remote_ip; u8_t so_options; u8_t tos; u8_t ttl ;

  struct tcp_pcb *next; void *callback_arg; tcp_accept_fn accept; enum tcp_state state; u8_t prio; u16_t local_port;

  
  u16_t remote_port;
  
  u8_t flags;









  


  
  u8_t polltmr, pollinterval;
  u8_t last_timer;
  u32_t tmr;

  
  u32_t rcv_nxt;   
  u16_t rcv_wnd;   
  u16_t rcv_ann_wnd; 
  u32_t rcv_ann_right_edge; 

  
  s16_t rtime;

  u16_t mss;   

  
  u32_t rttest; 
  u32_t rtseq;  
  s16_t sa, sv; 

  s16_t rto;    
  u8_t nrtx;    

  
  u8_t dupacks;
  u32_t lastack; 

  
  u16_t cwnd;
  u16_t ssthresh;

  
  u32_t snd_nxt;   
  u32_t snd_wl1, snd_wl2; 

  u32_t snd_lbb;       
  u16_t snd_wnd;   
  u16_t snd_wnd_max; 

  u16_t acked;

  u16_t snd_buf;   

  u16_t snd_queuelen; 


  
  u16_t unsent_oversize;
#line 240 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"

  
  struct tcp_seg *unsent;   
  struct tcp_seg *unacked;  


#line 247 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"

  struct pbuf *refused_data; 


  
  tcp_sent_fn sent;
  
  tcp_recv_fn recv;
  
  tcp_connected_fn connected;
  
  tcp_poll_fn poll;
  
  tcp_err_fn errf;
#line 262 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"




#line 267 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"

  
  u32_t keep_idle;



#line 274 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"
  
  
  u8_t persist_cnt;
  
  u8_t persist_backoff;

  
  u8_t keep_cnt_sent;
};

struct tcp_pcb_listen {  

  ip_addr_t local_ip; ip_addr_t remote_ip; u8_t so_options; u8_t tos; u8_t ttl ;

  struct tcp_pcb_listen *next; void *callback_arg; tcp_accept_fn accept; enum tcp_state state; u8_t prio; u16_t local_port;




#line 294 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"
};


















#line 314 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"


struct tcp_pcb * tcp_new     (void);

void             tcp_arg     (struct tcp_pcb *pcb, void *arg);
void             tcp_accept  (struct tcp_pcb *pcb, tcp_accept_fn accept);
void             tcp_recv    (struct tcp_pcb *pcb, tcp_recv_fn recv);
void             tcp_sent    (struct tcp_pcb *pcb, tcp_sent_fn sent);
void             tcp_poll    (struct tcp_pcb *pcb, tcp_poll_fn poll, u8_t interval);
void             tcp_err     (struct tcp_pcb *pcb, tcp_err_fn err);












#line 337 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"


#line 340 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"

void             tcp_recved  (struct tcp_pcb *pcb, u16_t len);
err_t            tcp_bind    (struct tcp_pcb *pcb, ip_addr_t *ipaddr,
                              u16_t port);
err_t            tcp_connect (struct tcp_pcb *pcb, ip_addr_t *ipaddr,
                              u16_t port, tcp_connected_fn connected);

struct tcp_pcb * tcp_listen_with_backlog(struct tcp_pcb *pcb, u8_t backlog);


void             tcp_abort (struct tcp_pcb *pcb);
err_t            tcp_close   (struct tcp_pcb *pcb);
err_t            tcp_shutdown(struct tcp_pcb *pcb, int shut_rx, int shut_tx);





err_t            tcp_write   (struct tcp_pcb *pcb, const void *dataptr, u16_t len,
                              u8_t apiflags);

void             tcp_setprio (struct tcp_pcb *pcb, u8_t prio);





err_t            tcp_output  (struct tcp_pcb *pcb);


const char* tcp_debug_state_str(enum tcp_state s);



}
#line 376 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"

#line 378 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"

#line 380 "d:\\sasha\\libs\\lwip-1.4.1\\src\\include\\lwip\\tcp.h"
#line 5 "d:\\sasha\\projects\\sever2\\et_st302_server\\src\\tcp_socket.cpp"

namespace ETHERNET {
namespace TCP_SOCKET {

    enum States {
        S_NONE = 0,
        S_ACCEPTED,
        S_RECIEVED,
        S_CLOSING
    };

    struct State {
        uchar state;
        uchar retries;
        struct tcp_pcb *pcb;
        
        struct pbuf *p;
    };

    void CloseConnection(tcp_pcb *_tpcb, State *_ss) {
        tcp_arg(_tpcb, (0));
        tcp_sent(_tpcb, (0));
        tcp_recv(_tpcb, (0));
        tcp_err(_tpcb, (0));
        tcp_poll(_tpcb, (0), 0);

        if(_ss) {
            mem_free(_ss);
        }
        tcp_close(_tpcb);
    }

    void Send(tcp_pcb *_tpcb, State *_ss) {
        pbuf *ptr;
        err_t wr_err = 0;

        while((wr_err == 0) && (_ss->p != (0)) && (_ss->p->len <= ((_tpcb)->snd_buf))) {
            ptr = _ss->p;
            
            wr_err = tcp_write(_tpcb, ptr->payload, ptr->len, 1);
            if(wr_err == 0) {
                u16_t plen;
                u8_t freed;

                plen = ptr->len;
                
                _ss->p = ptr->next;
                if(_ss->p != (0)) {
                    
                    pbuf_ref(_ss->p);
                }
                
                do {
                    
                    freed = pbuf_free(ptr);
                } while (freed == 0);
                
                tcp_recved(_tpcb, plen);
            } else if(wr_err == -1) {
                
                _ss->p = ptr;
            } else {
                
            }
        }
    }

    err_t CallbackOnSent(void *_arg, tcp_pcb *_tpcb, u16_t _len) {
        State *ss;
        (void)_len;
        ss = (State*)_arg;
        ss->retries = 0;

        if(ss->p != (0)) {
            
            tcp_sent(_tpcb, CallbackOnSent);
            Send(_tpcb, ss);
        } else {
            
            if(ss->state == S_CLOSING) {
                CloseConnection(_tpcb, ss);
            }
        }
        return 0;
    }

    err_t CallbackOnRecieve(void *_arg, struct tcp_pcb *_tpcb, struct pbuf *_p, err_t _err) {
        err_t ret_err;

        do { if(!(_arg != (0))) ; } while(0);
        State *ss = (struct State*)_arg;

        if(_p == (0)) {
            
            ss->state = S_CLOSING;
            if(ss->p == (0)) {
                
                CloseConnection(_tpcb, ss);
            } else {
                
                tcp_sent(_tpcb, CallbackOnSent);
            }
            ret_err = 0;
        } else if(_err != 0) {
            
            if(_p != (0)) {
                ss->p = (0);
                pbuf_free(_p);
            }
            ret_err = _err;
        } else if(ss->state == S_ACCEPTED) {
            
            ss->state = S_RECIEVED;
            
            ss->p = _p;
            
            tcp_sent(_tpcb, CallbackOnSent);
            Send(_tpcb, ss);
            ret_err = 0;
        } else if(ss->state == S_RECIEVED) {
            
            if(ss->p == (0)) {
                ss->p = _p;
                tcp_sent(_tpcb, CallbackOnSent);
                Send(_tpcb, ss);
            } else {
                struct pbuf *ptr;
                
                ptr = ss->p;
                pbuf_chain(ptr, _p);
            }
            ret_err = 0;
        } else if (ss->state == S_CLOSING) {
            
            tcp_recved(_tpcb, _p->tot_len);
            ss->p = (0);
            pbuf_free(_p);
            ret_err = 0;
        } else {
            
            tcp_recved(_tpcb, _p->tot_len);
            ss->p = (0);
            pbuf_free(_p);
            ret_err = 0;
        }
        return ret_err;
    }

    void CallbackOnError(void *_arg, err_t _err) {
        State *ss;
        (void)_err;
        ss = (State *)_arg;
        if(ss != (0)) {
            mem_free(ss);
        }
    }

    err_t CallbackOnPoll(void *_arg, tcp_pcb *_tpcb) {
        err_t ret_err;
        State *ss = (State *)_arg;
        if(ss != (0)) {
            if(ss->p != (0)) {
                
                tcp_sent(_tpcb, CallbackOnSent);
                Send(_tpcb, ss);
            } else {
                
                if(ss->state == S_CLOSING) {
                    CloseConnection(_tpcb, ss);
                }
            }
            ret_err == 0;
        } else {
            
            tcp_abort(_tpcb);
            ret_err = -10;
        }
        return ret_err;
    }

    err_t CallbackOnAccept(void *_arg, struct tcp_pcb *_newPCB, err_t _err) {
        err_t ret_err;

        State *s;
        (void)_arg;
        (void)_err;

        


        tcp_setprio(_newPCB, 1);

        s = (State*)mem_malloc(sizeof(State));

        if(s) {
            s->state = S_ACCEPTED;
            s->pcb = _newPCB;
            s->retries = 0;
            s->p = (0);
            
            tcp_arg(_newPCB, s);
            tcp_recv(_newPCB, CallbackOnRecieve);
            tcp_err(_newPCB, CallbackOnError);
            
            ret_err = 0;
        } else {
            ret_err = -1;
        }

        return ret_err;
    }

    bool Init(void (*_funcConnect)(int _id), void (*_funcReciever)(uchar *_buffer, uint _length)) {
        tcp_pcb *pcb = tcp_new();
        if(pcb != (0)) {
            err_t err = tcp_bind(pcb, ((ip_addr_t *)&ip_addr_any), DEFAULT_PORT);
            if(err == 0) {
                pcb = tcp_listen_with_backlog(pcb, 0xff);
                tcp_accept(pcb, CallbackOnAccept);
            } else {
                
            }
        } else {
            
        }
    }
    
    bool Init(void (*_funcReciever)(uchar *_buffer, uint _length)) {
        return true;
    }
}
}
